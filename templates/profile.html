
{%- extends "base.html" %}
{% import "bootstrap/utils.html" as utils %}

{% block content %}
  <div class="container">
  {%- with messages = get_flashed_messages(with_categories=True) %}
  {%- if messages %}
    <div class="row">
      <div class="col-md-12">
        {{utils.flashed_messages(messages)}}
      </div>
    </div>
  {%- endif %}
  {%- endwith %}
    <div class="jumbotron">
    {% if current_user.is_authenticated %}
      <h1>Welcome Back, {{name}}</h1>
    {% endif %}
    <h3>Add your reimbursement below:</h3><br>
      <form action="{{url_for('submit_request')}}" method = "POST">
        <label for = "amount">Reimbursement: </label><br>
        <label>$</label>
        <input type = "number" id = "amount" name = "amount" min = "1" max = "1000" step = ".01"><br><br>
        <label for ="description">Reason: </label><br>
        <textarea name= "description" cols= "50" rows= "2"></textarea><br><br>
        <input type = "submit" value = "Submit">

    </form>
    <h3>Your Reimbursement Requests:</h3>
    <table class= "table">
        <thead>
            <tr>
                <th scope="col">Request ID</th>
                <th scope="col">Username</th>
                <th scope="col">Amount</th>
                <th scope="col">Description</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
            {%  for row in curr_requests %}
            <tr>
                {% for cell in row %}
                <td>
                    {{ cell }}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
    </table>

    {% if current_user.account_type == "Manager" %}
        <h2>Manager Options</h2>
            <h3>All Reimbursement Requests:</h3>
            <table class= "table">
                <thead>
                    <tr>
                        <th scope="col">Request ID</th>
                        <th scope="col">Username</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Description</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                {%  for row in all_requests %}
                <tr>
                    {% for cell in row %}
                    <td>
                        {{ cell }}
                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}
        </table>
    {% endif %}
    
    </div>
   </div>
{%- endblock %}